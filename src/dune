(executables
 (libraries comby core ppx_deriving_yojson ppx_deriving_yojson.runtime hack_parallel camlzip)
 (preprocess (pps ppx_deriving_yojson ppx_let ppx_deriving.show bisect_ppx -conditional -no-comment-parsing))
 (modules main specification)
 (names main))

(executables
 (libraries core opium comby ppx_deriving_yojson ppx_deriving_yojson.runtime hack_parallel)
 (preprocess (pps ppx_deriving_yojson ppx_let ppx_deriving.show bisect_ppx -conditional -no-comment-parsing))
 (modules server)
 (names server))

(alias
 (name DEFAULT)
 (deps main.exe))

(alias
 (name DEFAULT)
 (deps server.exe))

(install
 (section bin)
 (files (main.exe as comby)))

(install
 (section bin)
 (files (server.exe as comby-server)))
